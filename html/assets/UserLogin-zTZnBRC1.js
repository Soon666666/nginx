import{_ as l,q as u,o as c,c as m,a as t,t as p,i as d,v as n,s as h}from"./index-1eimlCe9.js";const g={name:"UserLogin",data(){return{username:"",password:"",message:""}},methods:{login(){this.message="",this.checkForm()&&this.axios.post("/user/login",{username:this.username,password:this.password}).then(e=>{if(e.data.code===200){console.log(e.data.data);var s={username:e.data.data.userName,id:e.data.data.userId};if(this.saveUser(s),this.username="",this.password="",this.$route.query.redirect){const i=this.$route.query.redirect;this.$router.replace(i)}else this.$router.replace("/")}else e.data.code===500?this.message="用户登录失败":e.data.code===400&&(this.message="用户名或密码错误")}).catch(e=>{console.log(e.message)})},...u("user",["saveUser"]),checkForm(){return!this.username||!this.password?(alert("所有字段不能为空"),!1):!0}}},f={class:"login"},v={class:"error"},_={class:"lable"},w={class:"submit"};function x(e,s,i,y,r,o){return c(),m("div",f,[t("div",v,p(r.message),1),t("form",null,[t("div",_,[d(t("input",{name:"username",type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>r.username=a),placeholder:"请输入用户名"},null,512),[[n,r.username,void 0,{trim:!0}]]),d(t("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=a=>r.password=a),placeholder:"请输入密码"},null,512),[[n,r.password,void 0,{trim:!0}]])]),t("div",w,[t("input",{type:"submit",onClick:s[2]||(s[2]=h((...a)=>o.login&&o.login(...a),["prevent"])),value:"登录"})])])])}const k=l(g,[["render",x],["__scopeId","data-v-2d5ee2c4"]]);export{k as default};
