import{_ as l,o as r,c as u,i as C,v,a as e,n as f,t as a,r as p,F as k,e as y,g as _,j as B,K as g,m as q,d as h,b}from"./index-1eimlCe9.js";const T={data(){return{quantity:0}},name:"AddSubtractButton",methods:{handleAdd(){this.quantity++,this.$emit("update-quantity",this.quantity)},handleSubtract(){this.quantity--,this.$emit("update-quantity",this.quantity)}}},$={class:"addSubtractButton"};function x(o,n,i,d,t,s){return r(),u("div",$,[C(e("input",{"onUpdate:modelValue":n[0]||(n[0]=c=>t.quantity=c),type:"number"},null,512),[[v,t.quantity]]),e("div",null,[e("a",{class:"add",href:"javascript:;",onClick:n[1]||(n[1]=(...c)=>s.handleAdd&&s.handleAdd(...c))},"+"),e("a",{class:f(["sub",{disabled:t.quantity===0,actived:t.quantity>0}]),onClick:n[2]||(n[2]=(...c)=>s.handleSubtract&&s.handleSubtract(...c)),href:"javascript:;"}," - ",2)])])}const I=l(T,[["render",x],["__scopeId","data-v-e61a7256"]]),S={name:"BookIntroduction",props:{content:{type:String,default:""}}};function A(o,n,i,d,t,s){return r(),u("div",null,[e("p",null,a(i.content),1)])}const D=l(S,[["render",A]]),L={name:"BookCommentListItem",props:{item:{type:Object,default:()=>{}}},inject:["formatTime"]},P={class:"bookCommentListItem"};function N(o,n,i,d,t,s){return r(),u("div",P,[e("div",null,[e("span",null,a(i.item.username),1),e("span",null,a(s.formatTime(i.item.commentDate)),1)]),e("div",null,a(i.item.content),1)])}const j=l(L,[["render",N],["__scopeId","data-v-d77d1a9b"]]),Q={name:"BookCommentList",data(){return{comments:[],message:""}},components:{BookCommentListItem:j},created(){this.message="";let o=this.$route.path+"/comment";console.log(o),this.axios.get(o).then(n=>{n.status==200&&(console.log("comment:"+n),this.comments=n.data,this.comments.length===0&&(this.message="当前没有任何评论！"))}).catch(n=>alert(n))}};function U(o,n,i,d,t,s){const c=p("BookCommentListItem");return r(),u("div",null,[e("h3",null,a(t.message),1),(r(!0),u(k,null,y(t.comments,m=>(r(),_(c,{item:m,key:m.id},null,8,["item"]))),128))])}const V=l(Q,[["render",U]]),w={name:"BookQA",props:[""],data(){return{}},components:{},computed:{},methods:{},watch:{}},F=e("h3",null,"图书问答",-1),K=[F];function z(o,n,i,d,t,s){return r(),u("div",null,K)}const E=l(w,[["render",z]]),M={name:"TabComponent",props:{content:{type:String,default:""}},data(){return{currentTab:"introduction",tabs:[{title:"introduction",displayName:"图书介绍"},{title:"comment",displayName:"图书评价"},{title:"qa",displayName:"图书问答"}]}},components:{BookIntroduction:D,BookComment:V,BookQa:E},computed:{currentTabComponent:function(){return"book-"+this.currentTab}}},O={class:"tabComponent"},G=["onClick"];function H(o,n,i,d,t,s){return r(),u("div",O,[(r(!0),u(k,null,y(t.tabs,c=>(r(),u("button",{key:c.title,class:f(["tab-button",{active:t.currentTab===c.title}]),onClick:m=>t.currentTab=c.title},a(c.displayName),11,G))),128)),(r(),_(g,null,[(r(),_(B(s.currentTabComponent),{content:i.content,class:"tab"},null,8,["content"]))],1024))])}const J=l(M,[["render",H],["__scopeId","data-v-b75302cf"]]),R={name:"Book",data(){return{book:{},quantity:0}},inject:["factPrice","currency"],components:{AddSubtractButton:I,BookTabComponent:J},created(){console.log(this.$route.fullPath),this.axios.get(this.$route.fullPath).then(o=>{o.status==200&&(this.book=o.data)}).catch(o=>alert(o))},methods:{handleUpdate(o){this.quantity=o},addCart(o){let n=this.quantity;n===0&&(n=1);let i={...o,price:this.factPrice(o.price,o.discount)};this.addProductToCart({...i,quantity:n}),this.$router.push("/cart")},...q("cart",["addProductToCart"]),formatDiscount(o){if(o){let n=o.toString().substring(2);return n+="折",n}else return o}}},W={class:"book"},X=["src"],Y={class:"bookInfo"},Z={class:"factPrice"},tt={class:"discount"},nt={class:"price"},et={class:"addCart"};function ot(o,n,i,d,t,s){const c=p("AddSubtractButton"),m=p("BookTabComponent");return r(),u("div",W,[e("img",{src:t.book.image},null,8,X),e("div",null,[e("div",Y,[e("h3",null,a(t.book.title),1),e("p",null,a(t.book.slogan),1),e("p",null,[e("span",null,"作者："+a(t.book.author),1),e("span",null,"出版社："+a(t.book.bookConcern),1),e("span",null,"出版日期："+a(t.book.publishDate),1)]),e("p",null,[e("span",Z,a(s.currency(s.factPrice(t.book.price,t.book.discount))),1),e("span",tt," ["+a(s.formatDiscount(t.book.discount))+"] ",1),e("span",null,[h("[定价 "),e("i",nt,a(s.currency(t.book.price)),1),h("]")])])]),e("div",et,[b(c,{quantity:t.quantity,onUpdateQuantity:s.handleUpdate},null,8,["quantity","onUpdateQuantity"]),e("button",{class:"addCartButton",onClick:n[0]||(n[0]=st=>s.addCart(t.book))},"加入购物车")])]),b(m,{content:t.book.brief},null,8,["content"])])}const at=l(R,[["render",ot],["__scopeId","data-v-b1ef4487"]]);export{at as default};
